
@{
    ViewData["Title"] = "Add Account";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}


<div class="container">
    <h4 class="page-header mb-3">Account</h4>

    <div class="card card-body">
        <form id="formAdd">
            <div class="row">
                <div class="col-lg-5">
                    <div class="md-form">
                        <label for="inputAccountName">Account Name</label>
                        <input id="inputAccountName" type="text" name="AccountName" class="form-control" required>
                    </div>
                </div>  
                <div class="col-lg-5">
                    <div class="md-form">
                        <label for="inputCostPercentage">Cost Percentage</label>
                        <input id="inputCostPercentage" type="number" step="0.01" min="0" max="100" name="CostPercentage" class="form-control" required>
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="md-form">
                        <input id="btnSubmit" type="submit" value="Add" class="btn btn-deep-orange btn-md" />
                    </div>
                </div>
            </div>
        </form>

        <table class="table">
            <thead>
                <tr>
                    <th><strong>Account Name</strong></th>
                    <th><strong>Cost Parcentage</strong></th>
                    <th><strong>Edit</strong></th>
                    <th><strong>Delete</strong></th>
                </tr>
            </thead>
        </table>
    </div>
</div>


@section Scripts{ 
<script>
    (function () {
        var serializeForm = function (form) {
            var obj = {};
            var formData = new FormData(form);
            for (var key of formData.keys()) {
                obj[key] = formData.get(key);
            }
            return obj;
        };

        //submit form
        const formAdd = document.getElementById("formAdd");
        formAdd.addEventListener("submit", function (evt) {
            evt.preventDefault();

            disableBtn(this.btnSubmit, true);

            const body = serializeForm(this);
            $.ajax({
                url: '/Transaction/PostNewAccount',
                type: "POST",
                data: body,
                success: response => {
                    console.log(response)
                    if (response.data.IsSuccess) {
                        
                    }
                    disableBtn(this.btnSubmit, false);
                },
                error: error=>{
                    console.log(error);
                    disableBtn(this.btnSubmit, false);
                }
            });
        });

        //disable btn on submitting
        function disableBtn(btn, isDisable) {
            btn.disabled = isDisable;
        }
    })();
</script>
}

